"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const HttpStatus = require("http-status-codes");
exports.ErrorHandler = (env) => {
    return (err, req, res, next) => {
        if (err) {
            // Parse err
            let e;
            if (!isNaN(err)) {
                e = new Error(HttpStatus.getStatusText(err));
                e.status = err;
                err = e;
            }
            else {
                if (typeof err === 'string') {
                    e = new Error(err);
                    e.status = 400;
                    err = e;
                }
                else if (!err.status) {
                    err.status = 500;
                }
            }
            // Send response
            res.status(err.status);
            res.send({
                message: err.message,
                error: (env === 'development') ? err : null
            });
        }
    };
};
//# sourceMappingURL=error-middleware.js.map