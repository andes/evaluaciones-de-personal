"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Cancela automaticamente una subcripción previa antes de realizar una nueva consulta.
 * La función donde se use el decorador debe retornar el elemento Subcriber de Angular.
 * Util para evitar varios request a la API.
 */
function Unsubscribe() {
    return function (target, key, descriptor) {
        var original = descriptor.value;
        var subscriptions;
        function unsubscribe() {
            if (subscriptions && subscriptions.unsubscribe) {
                subscriptions.unsubscribe();
                subscriptions = null;
            }
        }
        descriptor.value = function () {
            unsubscribe();
            var temp = original.apply(this, arguments);
            if (!temp) {
                unsubscribe();
            }
            else {
                subscriptions = temp;
            }
            return temp;
        };
    };
}
exports.Unsubscribe = Unsubscribe;
//# sourceMappingURL=unsubscribe.js.map