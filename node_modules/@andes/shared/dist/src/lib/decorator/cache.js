"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Cachea el resultado de una request de forma automatica.
 * Se puede determinar la KEY de cache.
 */
var operators_1 = require("rxjs/operators");
var rxjs_1 = require("rxjs");
function Cache(_a) {
    var key = _a.key;
    var _cache = {};
    return function (target, propertyKey, descriptor) {
        var fn = descriptor.value;
        descriptor.value = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var objectKey = key ? (typeof key === 'string' ? args[0][key] : args[0]) : 'default';
            if (!_cache[objectKey]) {
                return fn.apply(this, args).pipe(operators_1.tap(function (x) { return _cache[objectKey] = x; }));
            }
            else {
                return rxjs_1.of(_cache[objectKey]);
            }
        };
        return descriptor;
    };
}
exports.Cache = Cache;
//# sourceMappingURL=cache.js.map